import{r as a,o as e,c as t,w as s,a as l,b as o,i as c,d as n,I as u,e as p,f as r,g as i,F as f,h as d,t as A,j as _,s as m,k,u as y,n as g}from"./index-95803fb6.js";import{_ as w,u as b,s as v,a as h,o as C}from"./uni-popup.f6ae92fa.js";const x=""+new URL("ic_staff_top_bg-c83f4204.png",import.meta.url).href,B=""+new URL("ic_staff_account_verify_bg-d473f868.png",import.meta.url).href,I=w({__name:"account-verify-popup",emits:["doVerify"],setup(i,{expose:f,emit:d}){const A=a();let _="",m="";const k=function(a){_=a.detail.value},y=function(a){m=a.detail.value},g=()=>{A.value.close()},w=()=>{m?_?d("doVerify",m,_):v("请输入密码"):v("请输入账号")};return f({showVerifyPopup:()=>{A.value.open()}}),(a,i)=>{const f=c,d=n,_=u,m=p,v=r;return e(),t(m,null,{default:s((()=>[l(b,{ref_key:"dialog",ref:A,type:"center","is-mask-click":!1},{default:s((()=>[l(m,{class:"pop-box"},{default:s((()=>[l(f,{class:"bg",src:B,mode:"widthFix"}),l(m,{class:"box-context"},{default:s((()=>[l(d,{class:"title"},{default:s((()=>[o("验证员工账号")])),_:1}),l(m,{class:"account-wrapper"},{default:s((()=>[l(d,{class:"t-account"},{default:s((()=>[o("＊OA账号")])),_:1}),l(_,{onInput:y,class:"input",placeholder:"请输入OA账号","placeholder-style":"fontSize:14px; color:'#A6A6A6'"})])),_:1}),l(m,{class:"password-wrapper"},{default:s((()=>[l(d,{class:"t-password"},{default:s((()=>[o("＊账号密码")])),_:1}),l(_,{onInput:k,class:"input",password:"",type:"text",placeholder:"请输入密码","placeholder-style":"fontSize:14px; color:'#A6A6A6'"})])),_:1}),l(m,{class:"bottom-wrapper"},{default:s((()=>[l(v,{type:"primary",plain:"",class:"cancel",onClick:g},{default:s((()=>[o("取消")])),_:1}),l(v,{type:"primary",class:"ok",onClick:w},{default:s((()=>[o("验证")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})}}},[["__scopeId","data-v-6eb5d9bb"]]),R=w({__name:"account-list-popup",props:{accounts:{type:Array,default:()=>[]}},emits:["onAccountItemClick"],setup(c,{expose:u,emit:r}){const _=a(),m=a(),k=()=>{_.value.close()};return u({showAccountPopup:()=>{_.value.open("bottom")}}),(a,u)=>{const y=n,g=p;return e(),t(b,{ref_key:"accountPopupRef",ref:_,type:"bottom","is-mask-click":!0},{default:s((()=>[l(g,{class:"account-list-wrapper"},{default:s((()=>[l(g,{class:"title"},{default:s((()=>[l(y,null,{default:s((()=>[o("切换OA身份")])),_:1})])),_:1}),(e(!0),i(f,null,d(c.accounts,((a,c)=>(e(),t(g,{class:"account-list",key:c},{default:s((()=>[l(g,{class:"item",onClick:e=>(a=>{r("onAccountItemClick",a),m.value=a,_.value.close()})(a)},{default:s((()=>[o(A(null==a?void 0:a.account),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128)),l(g,{class:"title cancel",onClick:k},{default:s((()=>[l(y,null,{default:s((()=>[o("取消")])),_:1})])),_:1})])),_:1})])),_:1},512)}}},[["__scopeId","data-v-0bdb16bf"]]),Q=w({__name:"account-login-popup",emits:["doLogin"],setup(i,{expose:f,emit:d}){const A=a();let m="";const k=function(a){m=a.detail.value},y=()=>{A.value.close()},g=()=>{m?d("doLogin",m):v("请输入token")};return f({showLoginPop:()=>{A.value.open()}}),(a,i)=>{const f=c,d=n,m=u,w=p,v=r;return e(),t(w,null,{default:s((()=>[l(b,{ref_key:"dialog",ref:A,type:"center","is-mask-click":!1},{default:s((()=>[l(w,{class:"pop-box"},{default:s((()=>[l(f,{class:"bg",src:B,mode:"widthFix"}),l(w,{class:"box-context"},{default:s((()=>[l(d,{class:"title"},{default:s((()=>[o("模拟登录")])),_:1}),l(w,{class:"account-wrapper"},{default:s((()=>[l(d,{class:"t-account"},{default:s((()=>[o("＊账号")])),_:1}),l(m,{onInput:k,class:"input",placeholder:"请输入token",maxlength:"-1","placeholder-style":"fontSize:14px; color:'#A6A6A6'"})])),_:1}),_('                  <view class="password-wrapper">'),_('                      <text class="t-password">＊账号密码</text>'),_('                      <input @input="onPasswordInput" class="input" password type="text" placeholder="请输入密码"'),_("                             placeholder-style=\"fontSize:14px; color:'#A6A6A6'\"/>"),_("                  </view>"),l(w,{class:"bottom-wrapper"},{default:s((()=>[l(v,{type:"primary",plain:"",class:"cancel",onClick:y},{default:s((()=>[o("取消")])),_:1}),l(v,{type:"primary",class:"ok",onClick:g},{default:s((()=>[o("登录")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})}}},[["__scopeId","data-v-6f783f6e"]]),O=w({__name:"index",setup(u){const r=h(),{staffEntrance:_,staffInfo:w}=m(r);r.initData();const b=a(),B=a(),O=a(),P=k((()=>{var a,e;return null==(e=null==(a=r.staffInfo)?void 0:a.accounts)?void 0:e.find((a=>{var e;return a.staff_id===(null==(e=r.staffInfo)?void 0:e.select_staff_id)})).account})),D=()=>{r.token?B.value.showAccountPopup():O.value.showLoginPop()};function F(a,e){v(a+" - "+e)}function L(a){r.setToken(a),r.initData()}function z(a){r.changeOAAccount(a.staff_id).then((a=>{r.initData()}))}return C((()=>{console.log("onload")})),(a,u)=>{const r=c,m=p,k=n;return e(),t(m,{class:"content"},{default:s((()=>{var a;return[l(m,{class:"toolbar"},{default:s((()=>[l(r,{class:"bg",src:x}),l(m,{class:"back-btn-wrapper"},{default:s((()=>[l(r,{class:"back-btn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAABYBAMAAABBi2mDAAAAAXNSR0IArs4c6QAAABhQTFRFAAAA////////////////////////////I36dXwAAAAd0Uk5TACFgZ2lz98aaORkAAABrSURBVEjHY2AYBZQAYUPs4izpZQpYJcLLyxOxibOWl5cX49CAVQKkAatRIA3lDjg0lOLSEDCqYeRqYMGlQQyHBgZzHBpwS+A0CqflOJ2L24OjWka1OJBSWOIsXnEXyDiLcNyFPs5qYhTgAAD9bY9PZbFzsQAAAABJRU5ErkJggg==",mode:"aspectFit"})])),_:1}),l(m,{class:"account-name-wrapper",onClick:D},{default:s((()=>[l(k,{class:"name"},{default:s((()=>[o(A(y(P)),1)])),_:1}),l(r,{class:"arrow",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAB10lEQVRIS+2UySuFURjG72eIEknJsJCsFMV/ICwslRULKerenWIhC2RamMrCVMaNBcnCRvaK7JQNRSyUFMoCSVy/53aOPtzhI3dBTv063/A+73POewbHF+fmxDm/748ZBIPBCkp26DjO5XdKhz4LXQn6bat/KxE/a/k4AFvQS9D9V0zQpxDfBg0wiH5N+pABP8vpliAHnmEIZgl68mKCPpm4RuiDRLgFv2ZiDQr4MAwqkZoSTwmC7qKZkDyV/wFoBxmp7UEn2iN3ifL5OA+ajZpKNAHTkWZCco1WJemGdKM7oG9Bc673d9sUgUwWoRQSQKNXXTcRvLhnQqy0lRoAZEAQjqGZ2BMb++kcICzj5zgUmyDVU4u/ilDrozWTeR30Q6aJO6XvgB3iZBZq4Qz0TTNYhmwTd02vBVyXmFbN8xhoU6hdQRPsu5OHNbDOZiYLvOeZgVzQ++EBtFaFoJHKPEDiXat19xGvClOGKoJHINeIzui1FkXm/Ya+BzZs+T6aRL2LzC6pQTQDdgvaHNrKraANEPG8eLrszCkfJVmaya4ydZF4JVxZPJXIHWROar2SQhJol81h8PgjBkpi7hqdWN05kyTXLGI2TyWKmSVKwL9BzOr9/hK9AkZPkBllQ1GSAAAAAElFTkSuQmCC"})])),_:1})])),_:1}),l(m,{class:"list-wrapper"},{default:s((()=>[(e(!0),i(f,null,d(y(_),((a,o)=>(e(),t(m,{class:"list",key:o},{default:s((()=>[l(r,{class:"item",src:a.image,mode:"widthFix",onClick:e=>(a=>{switch(a.key){case"staff_commission":b.value.showVerifyPopup();break;case"staff_purchase":g({url:"/pages/buy/staff-buy-page"});break;case"staff_purchase_special":g({url:"/pages/buy/staff-buy-page-swiper"})}})(a)},null,8,["src","onClick"])])),_:2},1024)))),128))])),_:1}),l(I,{ref_key:"verifyPopupRef",ref:b,onDoVerify:F},null,512),l(R,{ref_key:"accountPopupRef",ref:B,accounts:null==(a=y(w))?void 0:a.accounts,onOnAccountItemClick:z},null,8,["accounts"]),l(Q,{ref_key:"loginPopupRef",ref:O,onDoLogin:L},null,512)]})),_:1})}}},[["__scopeId","data-v-5b17bb59"]]);export{O as default};
